(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Button=require("./Button.jsx"),classnames=require("classnames"),Question;module.exports=Question=React.createClass({displayName:"Question",render:function(){var style={width:1/this.props.answers.length*100+"%"};var className=classnames("answer","center-group",this.props.className,"answers-"+this.props.answers.length);return React.createElement("div",{className:className},React.createElement("ul",{className:"choices middle"},this.props.answers.map(function(answer,idx){return React.createElement("li",{key:idx,style:style},React.createElement(Button,{className:classnames({"not-selected":this.props.selected!==undefined&&answer!==this.props.selected,selected:answer===this.props.selected}),action:this.props.action.bind(null,answer)},answer))}.bind(this))),React.createElement("span",{className:"left"},React.createElement("span",{className:"reminder low"},"Very",React.createElement("br",null),"Inaccurate")),React.createElement("span",{className:"right"},React.createElement("span",{className:"reminder high"},"Very",React.createElement("br",null),"Accurate")))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Button.jsx":4,classnames:46}],2:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null,DefaultRoute=Router.DefaultRoute,NotFoundRoute=Router.NotFoundRoute,Route=Router.Route,api=require("../services/api"),guide=require("../services/guide"),makeTransition=require("./makeTransition.jsx");var Home=require("./Home.jsx"),Games=require("./Games.jsx"),Identity=require("./Identity.jsx"),Survey=require("./Survey.jsx"),Section=require("./Section.jsx"),Consent=require("./Consent.jsx"),ProfileWrap=require("./ProfileWrap.jsx"),Profile=require("./Profile.jsx"),Intro=require("./Intro.jsx"),NotFound=require("./NotFound.jsx"),BrainType=Section.BrainType,Personality=Section.Personality,GamerType=Section.GamerType;var routes=React.createElement(Route,{name:"home",path:"/",handler:Home},React.createElement(Route,{name:"consent",path:"consent",handler:Consent}),React.createElement(Route,{name:"identity",path:"identity",handler:Identity}),React.createElement(Route,{name:"survey",handler:Survey},React.createElement(Route,{name:"brain",path:"brain-type",handler:BrainType}),React.createElement(Route,{name:"personality",path:"personality",handler:Personality}),React.createElement(Route,{name:"gamer-type",path:"gamer-type",handler:GamerType})),React.createElement(Route,{name:"results",handler:ProfileWrap},React.createElement(Route,{name:"profile",path:":data?",handler:Profile}),React.createElement(DefaultRoute,{handler:NotFound})),React.createElement(DefaultRoute,{name:"intro",handler:Intro}),React.createElement(NotFoundRoute,{name:"not-found",handler:NotFound}));module.exports=function(config){api.config(config);guide.config(config);var cb=function(Handler,state){React.render(React.createElement(Handler,{params:state.params}),document.body)};if(config.usePushState){Router.run(routes,Router.HistoryLocation,cb)}else{Router.run(routes,cb)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../services/api":40,"../services/guide":42,"./Consent.jsx":5,"./Games.jsx":13,"./Home.jsx":15,"./Identity.jsx":16,"./Intro.jsx":18,"./NotFound.jsx":21,"./Profile.jsx":22,"./ProfileWrap.jsx":23,"./Section.jsx":26,"./Survey.jsx":28,"./makeTransition.jsx":31}],3:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var classnames=require("classnames");var resize=require("../services/resize");var assign=require("object-assign");var CHANGE="change";var MULTIPLY=15;var CELL_W=MULTIPLY*16;var CELL_H=MULTIPLY*9;var IMG_W=1920;var IMG_H=1080;var FRAME_INTERVAL=90;var ANIMATION_INTERVAL=200;var raf=require("raf");var animators=require("../services/animator");module.exports=React.createClass({displayName:"Background",getDefaultProps:function(){return{renderCell:animators.random}},getInitialState:function(){return assign({time:0},this.getCells())},componentDidMount:function(){resize.onChange(this.resize);this.startAnimation()},componentWillUnmount:function(){resize.offChange(this.resize);this.stopAnimation()},resize:function(width,height){this.setState(this.getCells(width,height))},startAnimation:function(){this.timer=setInterval(this.nextFrame,300)},stopAnimation:function(){clearInterval(this.timer)},nextFrame:function(){raf(function(){this.setState({time:this.state.time+1})}.bind(this))},getCells:function(width,height){width=width||resize.getWidth();height=height||resize.getHeight();var x=Math.floor(width/CELL_W)+1;var y=Math.floor(height/CELL_H)+1;var backW=x*CELL_W;var backH=y*CELL_H;var cells=[];var iy,ix;for(iy=0;iy<y;iy+=1){cells.push([]);for(ix=0;ix<x;ix+=1){cells[iy].push({x:ix,y:iy})}}var img=this.fitImage(backW,backH);return{cells:cells,shiftX:(width-backW)/2,shiftY:(height-backH)/2,width:backW,height:backH,imageX:(backW-img.w)/2,imageY:(backH-img.h)/2,imageW:img.w,imageH:img.h}},fitImage:function(back_W,back_H){var back_R=back_W/back_H;var IMG_R=IMG_W/IMG_H;if(back_R>IMG_R){return{w:back_W,h:back_W/IMG_R}}else{return{w:back_H*IMG_R,h:back_H}}},makeCells:function(){var rowStyle={height:100/this.state.cells.length+"%"};var getCellStyle=this.getCellStyle;var grid={x:this.state.cells[0].length,y:this.state.cells.length};return this.state.cells.map(function(row,rowIdx){return React.createElement("div",{key:rowIdx,className:"cell-row",style:rowStyle},row.map(function(cell,colIdx){return React.createElement("div",{key:colIdx,className:"cell",style:getCellStyle(grid,cell)})}))})},componentWillMount:function(){this.setState({render:this.props.renderCell()})},getCellStyle:function(grid,cell){var col=cell.x;var row=cell.y;var cellX=col*-CELL_W+this.state.imageX;var cellY=row*-CELL_H+this.state.imageY;var cellStyle=assign({backgroundPosition:cellX+"px "+cellY+"px",backgroundSize:this.state.imageW+"px "+this.state.imageH+"px",width:100/this.state.cells[0].length+"%"},this.state.render(grid,cell,this.state.time));return cellStyle},render:function(){var backStyle={left:this.state.shiftX,right:this.state.shiftX,top:this.state.shiftY,bottom:this.state.shiftY,border:"1px solid red"};return React.createElement("div",{className:classnames(this.props.className)},React.createElement("div",{className:"background",style:backStyle},this.makeCells()),React.createElement("div",{className:"foreground"},this.props.children))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../services/animator":38,"../services/resize":43,classnames:46,"object-assign":52,raf:53}],4:[function(require,module,exports){(function(process,global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames"),Button;module.exports=Button=React.createClass({displayName:"Button",getInitialState:function(){return{mounted:false}},setMount:function(){this.setState({mounted:true})},componentDidMount:function(){process.nextTick(this.setMount)},_handleClick:function(){if(this.props.action){this.props.action()}},render:function(){var className=classnames("button",this.props.className,{mounted:this.state.mounted});return React.createElement("div",{className:className,onMouseDown:this._handleClick},this.props.children)}})}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:45,classnames:46}],5:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null,Navigation=Router.Navigation,Form=require("./Form.jsx"),FormSubmit=require("./FormSubmit.jsx"),Title=require("./Title.jsx"),classnames=require("classnames"),Checkbox=require("./FormCheckbox.jsx"),InputStore=require("../input/store"),FORM_ID="consent",Grid=require("./Grid.jsx"),Consent;module.exports=Consent=React.createClass({displayName:"Consent",mixins:[Navigation],getInitialState:function(){return{consent:InputStore.getForm(FORM_ID).hasConsented,valid:true}},_toggleConsent:function(checked){var newState={};newState.consent=checked;if(checked){newState.valid=true}this.setState(newState)},_submitConsent:function(form){if(form.hasConsented){this.transitionTo("identity")}else{this.setState({valid:false})}},render:function(){return React.createElement(Grid,null,React.createElement("div",{className:"consent-form"},React.createElement("div",{className:"preamble intro"},React.createElement("p",{className:"speaking"},React.createElement("em",null,"Thank you for helping our research!")),React.createElement("p",null,"Below you will find an explanation of what data we want to use in this research and how we will process the data.")),React.createElement("div",{className:"terms"},React.createElement("h6",null,"Informed Consent"),React.createElement("p",null,"For the purpose of our research we will ask you for your age, gender, nationality and level of English comprehension. We will also ask for your player name in one or more of the participating games: League of Legends, Battlefield: Hardline, and World of Warcraft. Your player name will be used to extract data on your game behavior for the relevant game. The game behavior data consists of information on when you play and for how long, and what actions you perform in the game. We will not process any other data from the games or ask you for any sensitive data (such as, without limitation, financial data, chat logs and transcriptions, etc.). By accepting to participate in this research study, you understand and agree that the relevant game company (Riot Games, DICE / Electronic Arts) will share your behavioral data listed above with the research project only for the purpose of the study described above. Data for World of Warcraft will be drawn from the publicly accessible Armory website and will not be shared. If you indicate in the survey that you are a minor (below 18 years of age), then your data will also not be shared."),React.createElement("p",null,"All your data will be kept confidential according to all applicable privacy and security laws and regulations. By submitting your data on this website, you give permission to MIT and Tilburg University to analyze your data for academic research purposes. You also give us permission to share the results of our research and aggregated anonymous data back to the relevant game company that we got the data from (i.e. Riot Games, DICE / Electronic Arts, as applicable) for further research and game design purposes. No one outside these organizations will gain access to your data. Any and all publications that result from this research will report on the data in terms of anonymous groups (aggregate). We will not publish or report on individuals in any manner. We will use the data to advance science and make video games more fun."),React.createElement("p",null,"As commented above â€” your privacy is important to us. All personal data shall be deleted at the end of the study. Only anonymized and aggregated data may be kept after the end of the study for further research purposes."),React.createElement("p",null,"We want to remind you that participation in this study is voluntary. You may decline to answer any or all questions. There are no negative consequences to you if you decide not to participate in this study.")),React.createElement(Form,{id:FORM_ID,className:"consent-footer"},React.createElement("div",{className:"consent-ok"},React.createElement(Checkbox,{id:"hasConsented",action:this._toggleConsent},"I declare that I understand the conditions of the research listed above.")),React.createElement(FormSubmit,{action:this._submitConsent,className:classnames({inactive:!this.state.consent})},"Continue"),this.state.valid?null:React.createElement("p",{className:"warning"},"You must give consent to take the survey"))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/store":36,"./Form.jsx":7,"./FormCheckbox.jsx":8,"./FormSubmit.jsx":12,"./Grid.jsx":14,"./Title.jsx":29,classnames:46}],6:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Link=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Link;var Button=require("./Button.jsx");var Video=require("./Video.jsx");module.exports=React.createClass({displayName:"Explainer",render:function(){return React.createElement("div",{className:"intro-body"},React.createElement("div",{className:"intro-body-inner"},React.createElement("h4",null,"How you play reflects who you are."),React.createElement("h5",null,"Discover your personality, brain type and gamer type in just 15 minutes."),React.createElement(Video,null),React.createElement("p",null,"The Playful Systems group at ",React.createElement("strong",null,"MIT Media Lab")," has teamed up with ",React.createElement("strong",null,"Tilburg University")," to study how personality relates to gameplay."),React.createElement("p",null,"We are asking players to participate in a three-part survey about their personality, brain type, and gamer type."),React.createElement("div",{className:"valid-games"},React.createElement("em",null,"If you play one or more of the following, you may be elligible!"),React.createElement("p",{className:"game-title"},"League of Legends"),React.createElement("p",{className:"game-title"},"Battlefield: Hardline"),React.createElement("p",{className:"game-title"},"Battlefield 4"),React.createElement("p",{className:"game-title"},"World of Warcraft")),React.createElement(Link,{className:"start-button",to:"consent"},React.createElement(Button,null,"Start")),React.createElement("h6",{className:"footnote"},"The survey takes approximately 15 minutes."),React.createElement("div",{className:"intro-foot"},React.createElement("div",{className:"intro-social"},React.createElement("i",{className:"fa fa-twitter"}),React.createElement("i",{className:"fa fa-facebook-official"})),React.createElement("div",{className:"intro-about"},"About us"))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Button.jsx":4,"./Video.jsx":30}],7:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,InputStore=require("../input/store"),InputActions=require("../input/actions"),classnames=require("classnames"),Form;module.exports=Form=React.createClass({displayName:"Form",getInitialState:function(){InputActions.createForm(this.props.id);return{formData:InputStore.getForm(this.props.id)}},componentDidMount:function(){InputStore.on(this.props.id,this._handleChange)},componentWillUnmount:function(){InputStore.removeListener(this.props.id,this._handleChange)},_handleChange:function(){this.setState({formData:InputStore.getForm(this.props.id)})},render:function(){var formId=this.props.id;var fields=function replace(children){return React.Children.map(children,function(child){if(!React.isValidElement(child)){return child}else{return React.cloneElement(child,{formId:formId,children:replace(child.props.children)})}})}(this.props.children);return React.createElement("form",{className:classnames("gamr-form",this.props.className)},fields)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/actions":34,"../input/store":36,classnames:46}],8:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames"),InputStore=require("../input/store"),InputActions=require("../input/actions"),FormCheckbox;module.exports=FormCheckbox=React.createClass({displayName:"FormCheckbox",getInitialState:function(){return{checked:this.props.formId?InputStore.getForm(this.props.formId)[this.props.id]:this.props.checked}},getDefaultProps:function(){return{checked:false,action:function(){}}},_handleClick:function(){var checked=!this.state.checked;if(this.props.formId){InputActions.updateField(this.props.formId,this.props.id,checked)}this.props.action(checked);this.setState({checked:checked})},render:function(){return React.createElement("div",{className:"checkbox-wrap"},React.createElement("div",{className:classnames("checkbox",{checked:this.state.checked}),onMouseDown:this._handleClick}),React.createElement("label",{onMouseDown:this._handleClick},this.props.children))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/actions":34,"../input/store":36,classnames:46}],9:[function(require,module,exports){var InputActions=require("../input/actions"),InputStore=require("../input/store");module.exports={getInitialState:function(){InputActions.setField(this.props.formId,this.props.id,this.props.defaultValue);return this._getState()},componentDidMount:function(){InputStore.on(this.props.formId,this._handleChange)},componentWillUnmount:function(){InputStore.removeListener(this.props.formId,this._handleChange)},_update:function(event){InputActions.updateField(this.props.formId,this.props.id,event.target.value)},_handleChange:function(){this.setState(this._getState())},_vallidate:function(value){if(!this.props.required){return true}else if(typeof value==="string"){return value.trim()?true:false}else{return value?true:false}},_getState:function(){var value=InputStore.getField(this.props.formId,this.props.id),valid=typeof this.props.vallidate==="function"?this.props.vallidate(value):this._vallidate(value);return{value:value,valid:valid}}}},{"../input/actions":34,"../input/store":36}],10:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames"),FormField=require("./FormField.jsx"),Select;module.exports=Select=React.createClass({displayName:"Select",mixins:[FormField],propTypes:{formId:React.PropTypes.string,vallidate:React.PropTypes.func},getDefaultProps:function(){return{required:true,defaultValue:""}},render:function(){return React.createElement("div",{className:classnames("gamr-field gamr-input",{invalid:!this.state.valid})},React.createElement("input",{value:this.state.value,placeholder:this.props.label,onChange:this._update}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./FormField.jsx":9,classnames:46}],11:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames"),FormField=require("./FormField.jsx"),Select;module.exports=Select=React.createClass({displayName:"Select",mixins:[FormField],propTypes:{formId:React.PropTypes.string,options:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.array]).isRequired,vallidate:React.PropTypes.func},getDefaultProps:function(){return{required:true,defaultValue:""}},render:function(){var options;var optionsData={};if(Array.isArray(this.props.options)){options=this.props.options.map(function(v,idx){optionsData[v.value]=v.label;return React.createElement("option",{value:v.value,key:idx},v.label)})}else{optionsData=this.props.options;options=Object.keys(optionsData).map(function(key,idx){return React.createElement("option",{value:key,key:idx},optionsData[key])})}return React.createElement("div",{className:classnames("gamr-field gamr-select",{invalid:!this.state.valid,"has-value":this.state.value})},React.createElement("span",{className:"select-cover"},optionsData[this.state.value]||this.props.label),React.createElement("select",{value:this.state.value,onChange:this._update},React.createElement("option",{value:""},this.props.label),options))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./FormField.jsx":9,classnames:46}],12:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,InputStore=require("../input/store"),Button=require("./Button.jsx"),FormSubmit;module.exports=FormSubmit=React.createClass({displayName:"FormSubmit",getDefaultProps:function(){return{action:function(){}}},render:function(){return React.createElement(Button,{className:this.props.className,action:function(){this.props.action(InputStore.getForm(this.props.formId))}.bind(this)},this.props.children)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/store":36,"./Button.jsx":4}],13:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null,Navigation=Router.Navigation,guide=require("../services/guide"),Form=require("./Form.jsx"),FormSubmit=require("./FormSubmit.jsx"),Title=require("./Title.jsx"),Checkbox=require("./FormCheckbox.jsx"),Grid=require("./Grid.jsx"),Identity;var gameKeys=["LOL","WOW","BFHD"],FORM_ID="games";module.exports=Identity=React.createClass({displayName:"Identity",mixins:[Navigation],submitGames:function(form){console.log("submit games",form);this.transitionTo("profile")},render:function(){return React.createElement(Grid,null,React.createElement("div",{className:"inner"},React.createElement("div",{className:"preamble"},React.createElement("p",{className:"speaking"},"Which of the following do you play?")),React.createElement(Form,{id:FORM_ID},React.createElement("div",{className:"check-group"},gameKeys.map(function(gameKey){return React.createElement(Checkbox,{key:gameKey,id:gameKey},guide.identity[gameKey].title)})),React.createElement(FormSubmit,{action:this.submitGames},"Continue"))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../services/guide":42,"./Form.jsx":7,"./FormCheckbox.jsx":8,"./FormSubmit.jsx":12,"./Grid.jsx":14,"./Title.jsx":29}],14:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"Grid",render:function(){return React.createElement("div",{className:"page"},React.createElement("div",{className:"outer"},this.props.children))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],15:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null;var RouteHandler=Router.RouteHandler;var State=Router.State;var Nav=require("./Nav.jsx");var classnames=require("classnames");module.exports=React.createClass({displayName:"Home",mixins:[State],render:function(){var className=classnames("app",{root:this.getPath()==="/"});return React.createElement("div",{className:className},React.createElement(Nav,null),React.createElement(RouteHandler,React.__spread({},this.props)))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Nav.jsx":20,classnames:46}],16:[function(require,module,exports){(function(global){var api=require("../services/api");var Grid=require("./Grid.jsx");var Form=require("./Form.jsx");var Link=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Link;var guide=require("../services/guide");var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Button=require("./Button.jsx");var Loading=require("./Loading.jsx");var FormInput=require("./FormInput.jsx");var FormSelect=require("./FormSelect.jsx");var FormSubmit=require("./FormSubmit.jsx");var InputStore=require("../input/store");var Background=require("./Background.jsx");var IdentityResults=require("./IdentityResults.jsx");var FORM_ID="identity";module.exports=React.createClass({displayName:"Identity",getInitialState:function(){return{profileResults:null}},submitProfiles:function(form){this.setState({loading:true});api.getUser(form,function(err,results){this.setState({profileResults:results,loading:false})}.bind(this))},reset:function(e){e.preventDefault();this.setState({profileResults:null})},confirm:function(){this.setState({confirmed:true})},render:function(){if(this.state.confirmed){return React.createElement(Background,null,React.createElement("div",{className:"up-next"},React.createElement("h6",null,"Identity: ",React.createElement("em",null,"Complete")),React.createElement("div",{className:"up-next-title"},React.createElement("strong",null,"up next..."),React.createElement("h5",null,"Brain Type")),React.createElement(Link,{to:"brain"},React.createElement(Button,null,"Begin"))))}else if(this.state.profileResults){console.log(this.state.profileResults);return React.createElement(Grid,null,React.createElement(IdentityResults,{results:this.state.profileResults,reset:this.reset,confirm:this.confirm}))}var games=InputStore.getForm("games");var WOW=guide.identity.WOW;var LOL=guide.identity.LOL;var BFHD=guide.identity.BFHD;var BF4=guide.identity.BF4;var BIO=guide.identity.BIO;var LANG=guide.identity.LANG;var formBlocks=[];var range=BIO.fields.year.range,years=[],y;for(y=range[0];y>=range[1];y-=1){years.push({label:y,value:y})}var background=React.createElement("div",null,React.createElement("div",{className:"form-block"},React.createElement("h2",null,BIO.title),React.createElement(FormSelect,React.__spread({required:false},BIO.fields.gender)),React.createElement(FormSelect,React.__spread({required:false},BIO.fields.year,{options:years})),React.createElement(FormSelect,React.__spread({required:false},BIO.fields.month))),React.createElement("div",{className:"form-block"},React.createElement("h2",null,LANG.title),React.createElement(FormSelect,React.__spread({required:false},LANG.fields.country)),React.createElement(FormSelect,React.__spread({required:false},LANG.fields.level))));if(games.LOL||true){formBlocks.push(React.createElement("div",{className:"form-block",key:"a"},React.createElement("h2",null,LOL.title),React.createElement(FormInput,React.__spread({},LOL.fields.sommonerName)),React.createElement(FormSelect,React.__spread({},LOL.fields.region)),React.createElement(FormSelect,React.__spread({},LOL.fields.preferredLane)),React.createElement(FormSelect,React.__spread({},LOL.fields.preferredRole))))}if(games.WOW||true){formBlocks.push(React.createElement("div",{className:"form-block",key:"b"},React.createElement("h2",null,WOW.title),React.createElement(FormInput,React.__spread({},WOW.fields.characterName)),React.createElement(FormSelect,React.__spread({},WOW.fields.region)),React.createElement(FormSelect,React.__spread({},WOW.fields.realm))))}if(games.BFHD||true){formBlocks.push(React.createElement("div",{className:"form-block",key:"c"},React.createElement("h2",null,BFHD.title),React.createElement(FormInput,React.__spread({},BFHD.fields.playerName))))}if(games.BF4||true){formBlocks.push(React.createElement("div",{className:"form-block",key:"d"},React.createElement("h2",null,BF4.title),React.createElement(FormInput,React.__spread({},BF4.fields.playerName))))}var profileText=formBlocks.length>1?"profiles":"profile";return React.createElement(Grid,null,React.createElement("div",{className:"preamble inner"},React.createElement("p",{className:"speaking"},React.createElement("em",null,"Before getting started...")),React.createElement("p",null,"We need some basic information about you")),React.createElement(Form,{id:FORM_ID,className:"inner"},React.createElement("h4",{className:"directions-title"},"Personal Profile"),background,React.createElement("h4",{className:"directions-title"},"Gamer Profile(s)"),React.createElement("div",null,formBlocks),React.createElement("div",{className:"inner"},React.createElement(Loading,{className:"left",active:this.state.loading}),React.createElement(FormSubmit,{className:"right",action:this.submitProfiles},"Submit"))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/store":36,"../services/api":40,"../services/guide":42,"./Background.jsx":3,"./Button.jsx":4,"./Form.jsx":7,"./FormInput.jsx":10,"./FormSelect.jsx":11,"./FormSubmit.jsx":12,"./Grid.jsx":14,"./IdentityResults.jsx":17,"./Loading.jsx":19}],17:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Link=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Link;var Button=require("./Button.jsx");var Title=require("./Title.jsx");module.exports=React.createClass({displayName:"IdentityResults",getDefaultProps:function(){return{results:{}}},render:function(){var results=[];if(this.props.results.LOL){results.push(React.createElement("li",{key:"d"},React.createElement(Title,{className:"result-title"},"League of Legends"),React.createElement("h6",null,this.props.results.LOL.id)))}if(this.props.results.BFHD){results.push(React.createElement("li",{key:"b"},React.createElement(Title,{className:"result-title"},"Battlefield: Hardline"),React.createElement("h6",null,this.props.results.BFHD.id)))}if(this.props.results.BF4){results.push(React.createElement("li",{key:"c"},React.createElement(Title,{className:"result-title"},"Battlefield 4"),React.createElement("h6",null,this.props.results.BF4.id)))}if(this.props.results.WOW){results.push(React.createElement("li",{key:"a"},React.createElement(Title,{className:"result-title"},"World of Warcraft"),React.createElement("h6",null,this.props.results.WOW.id)))}return React.createElement("div",{className:"inner"},React.createElement("div",{className:"preamble"},React.createElement("p",{className:"speaking"},React.createElement("em",null,"Here is what we found..."),React.createElement("br",null)),"Please confirm that these are your profiles"),React.createElement("div",null,React.createElement("ul",{className:"profile-results"},results),React.createElement(Button,{className:"right",action:this.props.confirm},"Looks Good"),React.createElement("p",{className:"small-text"},"Something missing? ",React.createElement("a",{className:"results-change",href:"#",onClick:this.props.reset},"Change your information"))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});
},{"./Button.jsx":4,"./Title.jsx":29}],18:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Link=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Link;var Title=require("./Title.jsx");var Button=require("./Button.jsx");var Background=require("./Background.jsx");var Explainer=require("./Explainer.jsx");module.exports=React.createClass({displayName:"Intro",render:function(){return React.createElement("div",{className:"intro"},React.createElement(Background,null),React.createElement("div",{className:"intro-block"},React.createElement("div",{className:"title-wrap"},React.createElement(Title,{className:"main-sub"},"PROJECT"),React.createElement(Title,{className:"main",split:true},"GAMR"),React.createElement("span",{className:"more-content fa fa-angle-down"}))),React.createElement(Explainer,null))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Background.jsx":3,"./Button.jsx":4,"./Explainer.jsx":6,"./Title.jsx":29}],19:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var classnames=require("classnames");module.exports=React.createClass({displayName:"Loading",render:function(){return React.createElement("div",{className:classnames("loading-icon",this.props.className,{active:this.props.active})},React.createElement("span",{className:"load-dot l-a"}),React.createElement("span",{className:"load-dot l-b"}),React.createElement("span",{className:"load-dot l-c"}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{classnames:46}],20:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var State=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).State;var classnames=require("classnames");var Progress=require("./Progress.jsx");var Title=require("./Title.jsx");var Link=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Link;var config={"/consent":{main:"Consent",progress:0},"/identity":{main:"Identity",progress:1},"/survey/brain-type":{main:"Brain Type",progress:2},"/survey/personality":{main:"Personality",progress:3},"/survey/gamer-type":{main:"Gamer Type",progress:4}};module.exports=React.createClass({displayName:"Nav",mixins:[State],render:function(){console.log(this.getPathname());var text=config[this.getPathname()];if(!text)return null;return React.createElement("div",null,React.createElement("div",{className:"nav-shadow"}),React.createElement("div",{className:"nav-wrap"},React.createElement("div",{className:"nav"},React.createElement("div",{className:"nav-left"},React.createElement(Link,{to:"home"},React.createElement(Title,{className:"nav-title-sub a"},"PROJECT GAMR")),React.createElement(Title,{className:"nav-title"},text.main)),React.createElement("div",{className:"nav-right"},React.createElement(Progress,{current:text.progress,length:5})))))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Progress.jsx":24,"./Title.jsx":29,classnames:46}],21:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null,Link=Router.Link,NotFound;module.exports=NotFound=React.createClass({displayName:"NotFound",render:function(){return React.createElement("div",{id:"home"},React.createElement("h1",null,"Not Found"),React.createElement(Link,{to:"home"},"Take The Survey"))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],22:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Grid=require("./Grid.jsx");var InputStore=require("../input/store");module.exports=React.createClass({displayName:"Profile",render:function(){return React.createElement(Grid,null,React.createElement("h1",null,"Profile"),React.createElement("p",null,"Here are your results..."),React.createElement("pre",null,JSON.stringify(InputStore.getAllForms(),null,2)))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/store":36,"./Grid.jsx":14}],23:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null,RouteHandler=Router.RouteHandler,ProfileWrap;module.exports=ProfileWrap=React.createClass({displayName:"ProfileWrap",render:function(){return React.createElement(RouteHandler,React.__spread({},this.props))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],24:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames");module.exports=React.createClass({displayName:"Progress",getDefaultProps:function(){return{current:0,length:4}},render:function(){var current=this.props.current;var dots=[],i,dotClass;for(i=0;i<this.props.length;i+=1){dotClass=classnames("progress-dot",{active:current===i,done:current>i,pending:current<i});dots.push(React.createElement("li",{className:dotClass,key:i}))}return React.createElement("ul",{className:classnames("progress-bar",this.props.className)},dots)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{classnames:46}],25:[function(require,module,exports){(function(global){var guide=require("../services/guide");var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var assign=require("object-assign");var Answer=require("./Answer.jsx");var Button=require("./Button.jsx");var createHash=require("../services/createProfile").createHash;var classnames=require("classnames");var Background=require("./Background.jsx");var InputStore=require("../input/store");var Navigation=(typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null).Navigation;var InputActions=require("../input/actions");var TRACKING_FIELD="currentIdx";module.exports=React.createClass({displayName:"QuestionSet",mixins:[Navigation],getInitialState:function(){InputActions.createForm(this.props.survey);var survey=guide.survey[this.props.survey];var currentIdx=0;return assign({current:currentIdx,started:currentIdx>0,hasPrev:currentIdx>0,finished:currentIdx>=survey.questions.length-1,hasNext:currentIdx<survey.questions.length-1},survey)},_makeId:function(idx,id){id=id||this.state.id;return id+idx},submitQuestion:function(answer){InputActions.updateField(this.props.survey,this._makeId(this.state.current),answer);var nextIdx=this.state.current+1;InputActions.updateField(this.props.survey,TRACKING_FIELD,nextIdx);if(this.state.current<this.state.questions.length-1){this.next()}else if(this.props.finalStep){this.goToResults()}else{this.setState({finished:true})}},goToResults:function(){this.transitionTo("profile",{},{profile:createHash(InputStore.getAllForms())})},nextSection:function(){this.transitionTo(this.props.nextRoute)},begin:function(){this.setState({started:true})},next:function(){var nextIdx=this.state.current+1;this.setState({current:nextIdx,hasNext:nextIdx<this.state.questions.length-1,hasPrev:nextIdx>0})},prev:function(){var nextIdx=this.state.current-1;this.setState({current:nextIdx,hasNext:nextIdx<this.state.questions.length-1,hasPrev:nextIdx>0})},render:function(){var oldAnswer=InputStore.getField(this.props.survey,this._makeId(this.state.current));var answers=this.state.scale.map(function(answer,idx){return idx+1});if(this.state.finished){return React.createElement(Background,null,React.createElement("div",{className:"up-next"},React.createElement("h6",null,"Part ",this.props.surveyIdx,": ",React.createElement("em",null,"Complete")),React.createElement("div",{className:"up-next-title"},React.createElement("strong",null,"up next..."),React.createElement("h5",null,this.props.nextTitle)),React.createElement(Button,{action:this.nextSection},"Continue")))}else if(this.state.started){return React.createElement("div",{className:classnames("question-set-body","inner",{answered:oldAnswer})},React.createElement("div",{className:"question-wrap"},React.createElement("p",{className:"question-text",key:this.state.current},this.state.questions[this.state.current])),React.createElement(Answer,{idx:this.state.current,selected:oldAnswer,action:this.submitQuestion,answers:answers}),React.createElement("div",{className:"question-nav"},this.state.hasPrev?React.createElement("span",{className:"prev",onClick:this.prev},"<"):null,this.state.hasPrev||this.state.hasNext?React.createElement("span",{className:"index"},this.state.current+1," of ",this.state.questions.length):null,this.state.hasNext&&oldAnswer?React.createElement("span",{className:"next",onClick:this.next},">"):null))}else{return React.createElement("div",null,React.createElement("div",{className:"instructions-body inner"},this.props.children,React.createElement("div",{className:"answerKey"},React.createElement("p",{className:"speaking"},"Indicate for each of the following statements whether it is:"),React.createElement("ul",{className:"answer-scale"},this.state.scale.map(function(answer,idx){return React.createElement("li",{key:idx},React.createElement("span",{className:"value"},idx+1)," ",answer)})))),React.createElement("div",{className:"inner"},React.createElement(Button,{className:"right",action:this.begin},"GOT IT")))}}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../input/actions":34,"../input/store":36,"../services/createProfile":41,"../services/guide":42,"./Answer.jsx":1,"./Background.jsx":3,"./Button.jsx":4,classnames:46,"object-assign":52}],26:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,QuestionSet=require("./QuestionSet.jsx");module.exports.BrainType=React.createClass({displayName:"BrainType",render:function(){return React.createElement(QuestionSet,{survey:"brainType",surveyIdx:"1",nextRoute:"personality",nextTitle:"Personality"},React.createElement("h4",{className:"directions-title"},"Instructions"),React.createElement("div",{className:"directions"},React.createElement("p",null,"Describe yourself as you generally are now, not as you wish to be in the future."),React.createElement("p",null,"Describe yourself as you honestly see yourself, in relation to other people you know of the same sex as you are, and roughly your same age.")))}});module.exports.Personality=React.createClass({displayName:"Personality",render:function(){return React.createElement(QuestionSet,{survey:"personality",surveyIdx:"2",nextRoute:"gamer-type",nextTitle:"Gamer Type"},React.createElement("h4",{className:"directions-title"},"Instructions"),React.createElement("div",{className:"directions"},React.createElement("p",null,"Describe yourself as you generally are now, not as you wish to be in the future."),React.createElement("p",null,"Describe yourself as you honestly see yourself, in relation to other people you know of the same sex as you are, and roughly your same age.")))}});module.exports.GamerType=React.createClass({displayName:"GamerType",render:function(){return React.createElement(QuestionSet,{survey:"gamerType",nextRoute:"results",finalStep:true},React.createElement("h4",{className:"directions-title"},"Instructions"),React.createElement("div",{className:"directions"},React.createElement("p",null,"Describe yourself as you generally are now, not as you wish to be in the future."),React.createElement("p",null,"Describe yourself as you honestly see yourself, in relation to other people you know of the same sex as you are, and roughly your same age.")))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./QuestionSet.jsx":25}],27:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,classnames=require("classnames"),Splitter;module.exports=Splitter=React.createClass({displayName:"Splitter",getDefaultProps:function(){return{separator:"",classPrefix:"seg",makeStyle:function(){return}}},render:function(){if(typeof this.props.children!=="string"){throw new Error("[Splitter] must have a string as children")}var segments=this.props.children.split(this.props.separator),classPrefix=this.props.classPrefix,makeStyle=this.props.makeStyle;return React.createElement("div",{className:"splitter"},segments.map(function(seg,idx){return React.createElement("span",{style:makeStyle(idx,seg),className:classnames(classPrefix,classPrefix+"-"+idx),key:idx},seg)}))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{classnames:46}],28:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;var Router=typeof window!=="undefined"?window.ReactRouter:typeof global!=="undefined"?global.ReactRouter:null;var RouteHandler=Router.RouteHandler;var Grid=require("./Grid.jsx");module.exports=React.createClass({displayName:"Survey",render:function(){return React.createElement(Grid,null,React.createElement(RouteHandler,React.__spread({},this.props,{key:name})))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Grid.jsx":14}],29:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,Splitter=require("./Splitter.jsx"),classnames=require("classnames"),Title;module.exports=Title=React.createClass({displayName:"Title",render:function(){return React.createElement("h2",{className:classnames("title",this.props.className)},this.props.split?React.createElement(Splitter,React.__spread({classPrefix:"t"},this.props),this.props.children):this.props.children)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./Splitter.jsx":27,classnames:46}],30:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null;module.exports=React.createClass({displayName:"Video",render:function(){return React.createElement("div",{className:"video-wrap"},React.createElement("div",{className:"video"},React.createElement("iframe",{id:"ytplayer",type:"text/html",width:"100%",height:"100%",src:"http://www.youtube.com/embed/i2q9qhlUcTU?autoplay=0&color=white&modestbranding=1&rel=0&showinfo=0&origin=http://example.com",frameBorder:"0"})))}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],31:[function(require,module,exports){(function(global){var React=typeof window!=="undefined"?window.React:typeof global!=="undefined"?global.React:null,ReactCSSTransitionGroup=React.addons.CSSTransitionGroup;module.exports=function(Component){return React.createClass({statics:{willTransitionFrom:function(transition,component,callback){component.setState({show:false});setTimeout(callback,300)}},getInitialState:function(){return{show:true}},render:function(){return React.createElement(ReactCSSTransitionGroup,{transitionName:"example",transitionAppear:true,component:"div"},this.state.show?React.createElement(Component,React.__spread({},this.props,{key:"a"})):null)}})}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],32:[function(require,module,exports){var Dispatcher=require("flux").Dispatcher;module.exports=new Dispatcher},{flux:48}],33:[function(require,module,exports){var app=require("./components/App.jsx");if(typeof gamrConfig!=="undefined"){app(gamrConfig)}else{console.error("[gamr]","You must setup `gamrConfig`")}},{"./components/App.jsx":2}],34:[function(require,module,exports){var AppDispatcher=require("../dispatcher/AppDispatcher"),Constants=require("./constants"),InputActions;module.exports=InputActions={createForm:function(formId){AppDispatcher.dispatch({actionType:Constants.CREATE_FORM,formId:formId})},resetForm:function(formId){AppDispatcher.dispatch({actionType:Constants.RESET_FORM,formId:formId})},setField:function(formId,fieldId,value){AppDispatcher.dispatch({actionType:Constants.SET_FIELD,formId:formId,fieldId:fieldId,value:value})},updateField:function(formId,fieldId,value,valid){AppDispatcher.dispatch({actionType:Constants.UPDATE_FIELD,formId:formId,fieldId:fieldId,value:value})}}},{"../dispatcher/AppDispatcher":32,"./constants":35}],35:[function(require,module,exports){var keyMirror=require("keymirror");module.exports=keyMirror({CREATE_FORM:null,RESET_FORM:null,SET_FIELD:null,UPDATE_FIELD:null})},{keymirror:51}],36:[function(require,module,exports){var AppDispatcher=require("../dispatcher/AppDispatcher");var EventEmitter=require("events").EventEmitter;var Constants=require("./constants");var assign=require("object-assign");var CHANGE_EVENT="change";var _input={};var InputStore=assign({},EventEmitter.prototype,{getField:function(form,field){return _input[form]&&_input[form][field]},getForm:function(form,field){return _input[form]||{}},getAllForms:function(){return _input},emitChange:function(){this.emit(CHANGE_EVENT)},addChangeListener:function(callback){this.on(CHANGE_EVENT,callback)},removeChangeListener:function(callback){this.removeListener(CHANGE_EVENT,callback)}});InputStore.setMaxListeners(0);function updateField(form,field,value,valid){if(_input[form]){console.log("[%s] %s: %s",form,field,value);_input[form][field]=value}else{console.error("[form] undefined form",form)}}AppDispatcher.register(function(action){switch(action.actionType){case Constants.CREATE_FORM:if(!action.formId){console.error("[form] mising formid",action.formId)}else if(_input[action.formId]){}else{_input[action.formId]={}}break;case Constants.RESET_FORM:_input[action.formId]={};InputStore.emit(action.formId);break;case Constants.SET_FIELD:if(InputStore.getField(action.formId,action.fieldId)){return}else{updateField(action.formId,action.fieldId,action.value)}break;case Constants.UPDATE_FIELD:updateField(action.formId,action.fieldId,action.value);InputStore.emit(action.formId);break;default:}});module.exports=InputStore},{"../dispatcher/AppDispatcher":32,"./constants":35,events:44,"object-assign":52}],37:[function(require,module,exports){var guide=require("../guide");var DEFAULT=3;var images=["/images/backgrounds-0.jpg","/images/backgrounds-1.jpg","/images/backgrounds-2.jpg","/images/backgrounds-3.jpg","/images/backgrounds-5.jpg"];var imgCache={};function getImage(idx){if(!imgCache[idx])imgCache[idx]="url('"+guide.assets+images[idx]+"')";return imgCache[idx]}module.exports.default=function(){return getImage(DEFAULT)};module.exports.random=function(){return getImage(Math.floor(Math.random()*(images.length-1)))};module.exports.byTime=function(time){return getImage(Math.ceil(time/2)%images.length%images.length)}},{"../guide":42}],38:[function(require,module,exports){var makeCell=require("./makeCell");var image=require("./image");function randomOpacity(){var opacity=Math.random()/3+.5;if(Math.random()<.15){opacity=opacity*3}return opacity}function makeRandom(){var cells=[];function getCell(cell){var id=cell.x+"."+cell.y;if(!cells[id])cells[id]=makeCell(0,image.byTime(0));return cells[id]}return function(grid,cell,time){cell=getCell(cell);var rand=Math.random();if(rand<.1){cell.fadeTo(0)}else if(Math.random()>.7){cell.setImage(image.byTime(time));cell.fadeTo(randomOpacity())}return{backgroundImage:cell.image(),opacity:cell.opacity()}}}module.exports={random:makeRandom}},{"./image":37,"./makeCell":39}],39:[function(require,module,exports){var LOCK=2e3+100;var INITIAL_LOCK=20;function Cell(opacity,image){var opacity=opacity||0;var image=image||"";var lastUpdate=Date.now()+INITIAL_LOCK-LOCK;function canUpdate(){return Date.now()-lastUpdate>LOCK}this.fadeTo=function(nextOpacity){if(canUpdate()){opacity=nextOpacity;lastUpdate=Date.now()}};this.setImage=function(nextImage){if(opacity===0&&canUpdate()){image=nextImage}};this.opacity=function(){return opacity};this.image=function(){return image}}module.exports=function makeCell(opacity,image){return new Cell(opacity,image)}},{}],40:[function(require,module,exports){var request=require("superagent"),api;module.exports=api={};api.config=function(config){api.host=config.api};api.getQuestions=function(cb){getJson(api.host+"/questions",cb)};api.getUser=function(data,cb){getJson(api.host+"/user",data,cb)};function getJson(path,query,cb){if(arguments.length===2){cb=query;query={}}request.get(path).query(query).end(handleError(function(res){try{cb(null,JSON.parse(res.text))}catch(e){cb(new Error("Bad Data"),{})}}))}function handleError(cb){return function(err,res){if(err){console.error("[api]",err.message);cb({})}else{cb(res)}}}},{superagent:55}],41:[function(require,module,exports){module.exports.createHash=function(forms){return"abc123"}},{}],42:[function(require,module,exports){var request=require("superagent"),guide;module.exports=guide={};guide.config=function(config){guide.survey=config.survey;guide.identity=config.identity;guide.assets=config.assets}},{superagent:55}],43:[function(require,module,exports){var raf=require("raf");var eventListener=require("eventListener");var EventEmitter=require("events").EventEmitter;var CHANGE="change";var ticking=false;var width=Infinity;var height=Infinity;var resize=new EventEmitter;function update(){resize.emit("change",width,height);ticking=false}function requestTick(){if(!ticking){raf(update);ticking=true}}function onResize(){getWindowSize();requestTick()}function getWindowSize(){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0];width=w.innerWidth||e.clientWidth||g.clientWidth,height=w.innerHeight||e.clientHeight||g.clientHeight}eventListener.add(window,"resize",onResize);getWindowSize();module.exports.getWidth=function(){return width};module.exports.getHeight=function(){return height};module.exports.onChange=function(fn){resize.on(CHANGE,fn)};module.exports.offChange=function(fn){resize.removeListener(CHANGE,fn)}},{eventListener:47,events:44,raf:53}],44:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],45:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){currentQueue[queueIndex].run()}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],46:[function(require,module,exports){(function(){"use strict";function classNames(){var classes="";for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if("string"===argType||"number"===argType){classes+=" "+arg}else if(Array.isArray(arg)){classes+=" "+classNames.apply(null,arg)}else if("object"===argType){for(var key in arg){if(arg.hasOwnProperty(key)&&arg[key]){classes+=" "+key}}}}return classes.substr(1)}if(typeof module!=="undefined"&&module.exports){module.exports=classNames}else if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return classNames})}else{window.classNames=classNames}})()},{}],47:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.eventListener=factory()}})(this,function(){function wrap(standard,fallback){return function(el,evtName,listener,useCapture){if(el[standard]){el[standard](evtName,listener,useCapture)}else if(el[fallback]){el[fallback]("on"+evtName,listener)}}}return{add:wrap("addEventListener","attachEvent"),remove:wrap("removeEventListener","detachEvent")}})},{}],48:[function(require,module,exports){module.exports.Dispatcher=require("./lib/Dispatcher")},{"./lib/Dispatcher":49}],49:[function(require,module,exports){"use strict";var invariant=require("./invariant");var _lastID=1;var _prefix="ID_";function Dispatcher(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=false;this.$Dispatcher_pendingPayload=null}Dispatcher.prototype.register=function(callback){var id=_prefix+_lastID++;this.$Dispatcher_callbacks[id]=callback;return id};Dispatcher.prototype.unregister=function(id){invariant(this.$Dispatcher_callbacks[id],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",id);delete this.$Dispatcher_callbacks[id]};Dispatcher.prototype.waitFor=function(ids){invariant(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var ii=0;ii<ids.length;ii++){var id=ids[ii];if(this.$Dispatcher_isPending[id]){invariant(this.$Dispatcher_isHandled[id],"Dispatcher.waitFor(...): Circular dependency detected while "+"waiting for `%s`.",id);continue}invariant(this.$Dispatcher_callbacks[id],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",id);this.$Dispatcher_invokeCallback(id)}};Dispatcher.prototype.dispatch=function(payload){invariant(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");
this.$Dispatcher_startDispatching(payload);try{for(var id in this.$Dispatcher_callbacks){if(this.$Dispatcher_isPending[id]){continue}this.$Dispatcher_invokeCallback(id)}}finally{this.$Dispatcher_stopDispatching()}};Dispatcher.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};Dispatcher.prototype.$Dispatcher_invokeCallback=function(id){this.$Dispatcher_isPending[id]=true;this.$Dispatcher_callbacks[id](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[id]=true};Dispatcher.prototype.$Dispatcher_startDispatching=function(payload){for(var id in this.$Dispatcher_callbacks){this.$Dispatcher_isPending[id]=false;this.$Dispatcher_isHandled[id]=false}this.$Dispatcher_pendingPayload=payload;this.$Dispatcher_isDispatching=true};Dispatcher.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=false};module.exports=Dispatcher},{"./invariant":50}],50:[function(require,module,exports){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(false){if(format===undefined){throw new Error("invariant requires an error message argument")}}if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}error.framesToPop=1;throw error}};module.exports=invariant},{}],51:[function(require,module,exports){"use strict";var keyMirror=function(obj){var ret={};var key;if(!(obj instanceof Object&&!Array.isArray(obj))){throw new Error("keyMirror(...): Argument must be an object.")}for(key in obj){if(!obj.hasOwnProperty(key)){continue}ret[key]=key}return ret};module.exports=keyMirror},{}],52:[function(require,module,exports){"use strict";function ToObject(val){if(val==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}module.exports=Object.assign||function(target,source){var from;var keys;var to=ToObject(target);for(var s=1;s<arguments.length;s++){from=arguments[s];keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++){to[keys[i]]=from[keys[i]]}}return to}},{}],53:[function(require,module,exports){var now=require("performance-now"),global=typeof window==="undefined"?{}:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=global["request"+suffix],caf=global["cancel"+suffix]||global["cancelRequest"+suffix];for(var i=0;i<vendors.length&&!raf;i++){raf=global[vendors[i]+"Request"+suffix];caf=global[vendors[i]+"Cancel"+suffix]||global[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}module.exports=function(fn){return raf.call(global,fn)};module.exports.cancel=function(){caf.apply(global,arguments)}},{"performance-now":54}],54:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)}).call(this,require("_process"))},{_process:45}],55:[function(require,module,exports){var Emitter=require("emitter");var reduce=require("reduce");var root="undefined"==typeof window?this||self:window;function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!=root.location.protocol||!root.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function isObject(obj){return obj===Object(obj)}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj){if(null!=obj[key]){pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]))}}return pairs.join("&")}request.serializeObject=serialize;function parseString(str){var obj={};var pairs=str.split("&");var parts;var pair;for(var i=0,len=pairs.length;i<len;++i){pair=pairs[i];parts=pair.split("=");obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1])}return obj}request.parseString=parseString;request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify};request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse};function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i){line=lines[i];index=line.indexOf(":");field=line.slice(0,index).toLowerCase();val=trim(line.slice(index+1));fields[field]=val}return fields}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();if(key&&val)obj[key]=val;return obj},{})}function Response(req,options){options=options||{};this.req=req;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType==="undefined"?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text?this.text:this.xhr.response):null}Response.prototype.get=function(field){return this.header[field.toLowerCase()]};Response.prototype.setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]};Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return parse&&str&&(str.length||str instanceof Object)?parse(str):null};Response.prototype.setStatusProperties=function(status){if(status===1223){status=204}var type=status/100|0;this.status=status;this.statusType=type;this.info=1==type;this.ok=2==type;this.clientError=4==type;this.serverError=5==type;this.error=4==type||5==type?this.toError():false;this.accepted=202==status;this.noContent=204==status;this.badRequest=400==status;this.unauthorized=401==status;this.notAcceptable=406==status;this.notFound=404==status;this.forbidden=403==status};Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg="cannot "+method+" "+url+" ("+this.status+")";var err=new Error(msg);err.status=this.status;err.method=method;err.url=url;return err};request.Response=Response;function Request(method,url){var self=this;Emitter.call(this);this._query=this._query||[];this.method=method;this.url=url;this.header={};this._header={};this.on("end",function(){var err=null;var res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response");err.parse=true;err.original=e;return self.callback(err)}self.emit("response",res);if(err){return self.callback(err,res)}if(res.status>=200&&res.status<300){return self.callback(err,res)}var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err;new_err.response=res;new_err.status=res.status;self.callback(err||new_err,res)})}Emitter(Request.prototype);Request.prototype.use=function(fn){fn(this);return this};Request.prototype.timeout=function(ms){this._timeout=ms;return this};Request.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};Request.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};Request.prototype.set=function(field,val){if(isObject(field)){for(var key in field){this.set(key,field[key])}return this}this._header[field.toLowerCase()]=val;this.header[field]=val;return this};Request.prototype.unset=function(field){delete this._header[field.toLowerCase()];delete this.header[field];return this};Request.prototype.getHeader=function(field){return this._header[field.toLowerCase()]};Request.prototype.type=function(type){this.set("Content-Type",request.types[type]||type);return this};Request.prototype.accept=function(type){this.set("Accept",request.types[type]||type);return this};Request.prototype.auth=function(user,pass){var str=btoa(user+":"+pass);this.set("Authorization","Basic "+str);return this};Request.prototype.query=function(val){if("string"!=typeof val)val=serialize(val);if(val)this._query.push(val);return this};Request.prototype.field=function(name,val){if(!this._formData)this._formData=new root.FormData;this._formData.append(name,val);return this};Request.prototype.attach=function(field,file,filename){if(!this._formData)this._formData=new root.FormData;this._formData.append(field,file,filename);return this};Request.prototype.send=function(data){var obj=isObject(data);var type=this.getHeader("Content-Type");if(obj&&isObject(this._data)){for(var key in data){this._data[key]=data[key]}}else if("string"==typeof data){if(!type)this.type("form");type=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==type){this._data=this._data?this._data+"&"+data:data}else{this._data=(this._data||"")+data}}else{this._data=data}if(!obj||isHost(data))return this;if(!type)this.type("json");return this};Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout();fn(err,res)};Request.prototype.crossDomainError=function(){var err=new Error("Origin is not allowed by Access-Control-Allow-Origin");err.crossDomain=true;this.callback(err)};Request.prototype.timeoutError=function(){var timeout=this._timeout;var err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout;this.callback(err)};Request.prototype.withCredentials=function(){this._withCredentials=true;return this};Request.prototype.end=function(fn){var self=this;var xhr=this.xhr=request.getXHR();var query=this._query.join("&");var timeout=this._timeout;var data=this._formData||this._data;this._callback=fn||noop;xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self.timeoutError();if(self.aborted)return;return self.crossDomainError()}self.emit("end")};var handleProgress=function(e){if(e.total>0){e.percent=e.loaded/e.total*100}self.emit("progress",e)};if(this.hasListeners("progress")){xhr.onprogress=handleProgress}try{if(xhr.upload&&this.hasListeners("progress")){xhr.upload.onprogress=handleProgress}}catch(e){}if(timeout&&!this._timer){this._timer=setTimeout(function(){self.timedout=true;self.abort()},timeout)}if(query){query=request.serializeObject(query);this.url+=~this.url.indexOf("?")?"&"+query:"?"+query}xhr.open(this.method,this.url,true);if(this._withCredentials)xhr.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var serialize=request.serialize[this.getHeader("Content-Type")];if(serialize)data=serialize(data)}for(var field in this.header){if(null==this.header[field])continue;xhr.setRequestHeader(field,this.header[field])}this.emit("request",this);xhr.send(data);return this};request.Request=Request;function request(method,url){if("function"==typeof url){return new Request("GET",method).end(url)}if(1==arguments.length){return new Request("GET",method)}return new Request(method,url)}request.get=function(url,data,fn){var req=request("GET",url);if("function"==typeof data)fn=data,data=null;if(data)req.query(data);if(fn)req.end(fn);return req};request.head=function(url,data,fn){var req=request("HEAD",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.del=function(url,fn){var req=request("DELETE",url);if(fn)req.end(fn);return req};request.patch=function(url,data,fn){var req=request("PATCH",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.post=function(url,data,fn){var req=request("POST",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.put=function(url,data,fn){var req=request("PUT",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};module.exports=request},{emitter:56,reduce:57}],56:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],57:[function(require,module,exports){module.exports=function(arr,fn,initial){var idx=0;var len=arr.length;var curr=arguments.length==3?initial:arr[idx++];while(idx<len){curr=fn.call(null,curr,arr[idx],++idx,arr)}return curr}},{}]},{},[33]);